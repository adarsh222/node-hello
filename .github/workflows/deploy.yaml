name: Deploying

on:
  push:
    branches:
      - master

jobs:
  deploy:
    name: Deploy
    runs-on: ubuntu-latest

    steps:
      - name: executing remote ssh commands using ssh key
        uses: appleboy/ssh-action@master
        with:
          host: ${{ secrets.AWS_HOST }}
          username: ${{ secrets.AWS_USER }}
          key: ${{ secrets.AWS_KEY }}
          run: 'pwd && ls -la  && ./deploy.sh'
          script: |
               sudo yum install curl -y 
               curl https://raw.githubusercontent.com/creationix/nvm/master/install.sh | bash  
               nvm instal 16
               nvm use 16
               cd ~/home/ec2-user/node-hello
               git pull origin master
               npm install
               node index.js
          